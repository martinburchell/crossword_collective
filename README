Crossword Collective is a hack to allow people to collaborate remotely
on the Guardian Crossword via Google Docs. At the moment it only works
with Firefox.

Here are some examples I made earlier:
* https://docs.google.com/Doc?docid=0AXn9GnIYJyz4ZGN2aGZ2Nm1fNjhjbjhqeDhkNg&hl=en_GB&authkey=CJXmtqsG"
* https://docs.google.com/Doc?docid=0AXn9GnIYJyz4ZGN2aGZ2Nm1fNzBoazk1NXJnZg&hl=en_GB&authkey=CNTM-doB"


Prerequisites
-------------
* Firefox
* ImageMagick
* Check the list of modules at the top of crossword.py to see what needs to be installed or try running the script (below) and look out for the error messages.


Running the Script
------------------
Change data_dir at the top of crossword_collective.py to be the directory where the crossword files are going to be stored.

Run the script crossword_collective.py. This should:

* Download the PDFs from the Guardian website
* Convert them to PNGs using ImageMagick
* Detect the grid by scanning the pixels
* If necessary, move the clues to the right of the grid to reduce the amount of scrolling
* Create the HTML for the table and the CSS to align the table with the image
* Email the PNG, HTML and CSS to an address, if specified

This script will also attempt to parse the HTML version of the
Guardian crossword but because the HTML site on the Guardian website
is broken, quite often the clues are missing.


File Structure
--------------
Under data_dir there is a subdirectory for each numbered
crossword. I'm relying on the quick crosswords having lower numbers
than the cryptic and prize ones and never overlapping. There is a text
file which contains the number of the next crossword of each type (eg
next_quick.txt). If you run the crossword_collective script as a cron
job around midnight it usually picks up the crosswords for the
following morning. It will attempt to download each one in
sequence until the download fails.

In each crossword directory the files are as follows:
* <prefix>.pdf - Original PDF from the Guardian website
* <prefix>.png - PNG of the crossword to upload
* <prefix>_pdf.html - HTML containing the grid
* <prefix>_pdf.css - CSS for positioning the grid
* <prefix>.html - HTML version of the crossword (unreliable) - the CSS for this is in the top level directory of the code, file crossword.css

Editing and Sharing the crossword
---------------------------------
You'll need a Google account. Go to Google Documents and then
*Document Settings*. Under *Editing* untick the setting *Create new
text documents using the latest version of the document editor*

* Create a new document
* Upload the image <prefix>.png (Insert->Image...)
* Edit the HTML (Edit->Edit HTML)
* Paste <prefix_pdf.html> into the window below the existing content
* Replace the src attribute of the image with that generated by Google when the image was uploaded
* Delete the content above that which was pasted
* Edit the CSS (Edit->Edit CSS)
* Paste <prefix>_pdf.css into the window

You should now be able to click in the squares to enter letters into
the grid. You'll need to use the arrow keys or tab key to
navigate. Don't press return whatever you do.

TODO
----
* Get it working on other browsers apart from Firefox
* Do the PNG conversion without calling ImageMagick os.system()
* Automate the upload process somehow
* Remove the need to use Google Docs
